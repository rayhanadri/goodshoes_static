<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>

    <!-- File local CSS -->
    <link rel="stylesheet" href="./css/style.css" />

    <link rel="icon" href="./img/icon/GS_logo.svg" type="image/x-icon" />
    <title>Title</title>
  </head>
  <body>
    <div class="container-fluid" style="padding: 15px">
      <div class="row">
        <div class="col-md-12">
          <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="./index.html"
              ><img
                src="./img/icon/GS_logo.svg"
                width="30"
                height="30"
                class="d-inline-block align-top"
                alt="logo"
              />
              GoodShoes Inc.</a
            >
            <button
              class="navbar-toggler"
              type="button"
              data-toggle="collapse"
              data-target="#navbarNav"
              aria-controls="navbarNav"
              aria-expanded="false"
              aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
              <ul class="navbar-nav">
                <li class="nav-item">
                  <a class="nav-link" id="linkHome" href="./index.html">Home</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" id="linkProducts" href="./products.html"
                    >Products</a
                  >
                </li>
                <li class="nav-item">
                  <a class="nav-link" id="linkGallery" href="./gallery.html"
                    >Gallery</a
                  >
                </li>
                <li class="nav-item">
                  <a class="nav-link" id="linkAboutUs" href="./about_us.html"
                    >About Us</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    id="linkContactUs"
                    href="./contact_us.html"
                    >Contact Us</a
                  >
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    id="linkDiskon"
                    href="./hitung_belanja.html"
                    >Hitung Diskon</a
                  >
                </li>
                <li class="nav-item">
                  <a class="nav-link" id="linkMessage" href="./message.html"
                    >Message List</a
                  >
                </li>

                <li class="nav-item">
                  <a class="nav-link" id="linkLogout" href="./logout.html"
                    >Logout</a
                  >
                </li>
                <li class="nav-item">
                  <a class="nav-link" id="linkLogin" href="./login.html"
                    >Login</a
                  >
                </li>
                <li class="nav-item">
                  <a class="nav-link" id="linkRegister" href="./register.html"
                    >Register</a
                  >
                </li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="card">
            <div style="padding: 15px">
              Hello <b>Admin 1</b> (admin) have a nice day!
            </div>
          </div>
        </div>
      </div>
      <!-- Button trigger modal -->
      <button
        type="button"
        class="btn btn-primary"
        data-toggle="modal"
        data-target="#addProductModal"
        style="margin-top: 15px"
      >
        Add New Product
      </button>

      <!-- Modal -->
      <div
        class="modal fade"
        id="addProductModal"
        tabindex="-1"
        role="dialog"
        aria-labelledby="addProductModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="addProductModalLabel">
                Add New Product
              </h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form
                id="addProductForm"
                method="POST"
                enctype="multipart/form-data"
              >
                <div class="form-group row">
                  <label for="type" class="col-sm-2 col-form-label">Type</label>
                  <div class="col-sm-10">
                    <select class="form-control" id="type" name="type">
                      <option value="Sepatu Bola" selected>Sepatu Bola</option>
                      <option value="Sepatu Futsal">Sepatu Futsal</option>
                      <option value="Running">Running</option>
                      <option value="Sneakers">Sneakers</option>
                    </select>
                  </div>
                </div>
                <div class="form-group row">
                  <label for="merk" class="col-sm-2 col-form-label">Merk</label>
                  <div class="col-sm-10">
                    <input
                      type="text"
                      class="form-control"
                      id="merk"
                      name="merk"
                      placeholder="Merk"
                      required
                    />
                  </div>
                </div>
                <div class="form-group row">
                  <label for="nama" class="col-sm-2 col-form-label">Nama</label>
                  <div class="col-sm-10">
                    <input
                      type="text"
                      class="form-control"
                      id="nama"
                      name="nama"
                      placeholder="Nama"
                      required
                    />
                  </div>
                </div>
                <div class="form-group row">
                  <label for="kode_produk" class="col-sm-2 col-form-label"
                    >Kode Produk</label
                  >
                  <div class="col-sm-10">
                    <input
                      type="text"
                      class="form-control"
                      id="kode_produk"
                      name="kode_produk"
                      placeholder="Kode Produk"
                      required
                    />
                  </div>
                </div>
                <div class="form-group row">
                  <label for="price" class="col-sm-2 col-form-label"
                    >Price</label
                  >
                  <div class="col-sm-10">
                    <input
                      type="number"
                      class="form-control"
                      id="price"
                      name="price"
                      placeholder="Price"
                      required
                    />
                  </div>
                </div>
                <div class="form-group row">
                  <label for="foto" class="col-sm-2 col-form-label">Foto</label>
                  <div class="col-sm-10">
                    <input
                      type="file"
                      class="form-control-file"
                      id="foto"
                      name="foto"
                      accept="image/*"
                    />
                  </div>
                </div>
                <div class="text-center">
                  <button type="submit" class="btn btn-primary mx-auto">
                    Submit
                  </button>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-dismiss="modal"
              >
                Close
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal 2 -->
      <div
        class="modal fade"
        id="updateProductModal"
        tabindex="-1"
        role="dialog"
        aria-labelledby="updateProductModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="updateProductModalLabel">
                Update Product
              </h5>
              <button
                type="button"
                class="close"
                data-dismiss="modal"
                aria-label="Close"
              >
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <form
                id="updateProductForm"
                method="POST"
                enctype="multipart/form-data"
              >
                <input type="hidden" id="id_update" name="id_update" required />
                <div class="form-group row">
                  <label for="type_update" class="col-sm-2 col-form-label"
                    >Type</label
                  >
                  <div class="col-sm-10">
                    <select
                      class="form-control"
                      id="type_update"
                      name="type_update"
                    >
                      <option value="Sepatu Bola" selected>Sepatu Bola</option>
                      <option value="Sepatu Futsal">Sepatu Futsal</option>
                      <option value="Running">Running</option>
                      <option value="Sneakers">Sneakers</option>
                    </select>
                  </div>
                </div>
                <div class="form-group row">
                  <label for="merk_update" class="col-sm-2 col-form-label"
                    >Merk</label
                  >
                  <div class="col-sm-10">
                    <input
                      type="text"
                      class="form-control"
                      id="merk_update"
                      name="merk_update"
                      placeholder="Merk"
                      required
                    />
                  </div>
                </div>
                <div class="form-group row">
                  <label for="nama_update" class="col-sm-2 col-form-label"
                    >Nama</label
                  >
                  <div class="col-sm-10">
                    <input
                      type="text"
                      class="form-control"
                      id="nama_update"
                      name="nama_update"
                      placeholder="Nama"
                      required
                    />
                  </div>
                </div>
                <div class="form-group row">
                  <label
                    for="kode_produk_update"
                    class="col-sm-2 col-form-label"
                    >Kode Produk</label
                  >
                  <div class="col-sm-10">
                    <input
                      type="text"
                      class="form-control"
                      id="kode_produk_update"
                      name="kode_produk_update"
                      placeholder="Kode Produk"
                      required
                    />
                  </div>
                </div>
                <div class="form-group row">
                  <label for="price_update" class="col-sm-2 col-form-label"
                    >Price</label
                  >
                  <div class="col-sm-10">
                    <input
                      type="number"
                      class="form-control"
                      id="price_update"
                      name="price_update"
                      placeholder="Price"
                      required
                    />
                  </div>
                </div>
                <div class="form-group row">
                  <label for="foto_update" class="col-sm-2 col-form-label"
                    >Foto</label
                  >
                  <div class="col-sm-10">
                    <input
                      type="file"
                      class="form-control-file"
                      id="foto_update"
                      name="foto_update"
                      accept="image/*"
                    />
                  </div>
                </div>
                <div class="text-center">
                  <button type="submit" class="btn btn-primary mx-auto">
                    Submit
                  </button>
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-dismiss="modal"
              >
                Close
              </button>
            </div>
          </div>
        </div>
      </div>
      <div class="row" style="padding-top: 15px">
        <div class="col-md-12">
          <div class="card">
            <div class="card-header text-center">
              <h4>All Products</h4>
            </div>
            <div class="card-body">
              <div class="row">
                <table class="table table-hover">
                  <thead>
                    <tr>
                      <th>Brand</th>
                      <th>Name</th>
                      <th>Type</th>
                      <th>Code</th>
                      <th>Price</th>
                      <th>Image</th>
                      <th>Details</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Nike</td>
                      <td>Nike Zoom Vapor</td>
                      <td>Sepatu Bola</td>
                      <td>NSB1</td>
                      <td>Rp. 1.000.000</td>
                      <td>
                        <img
                          src="./img/products/bola_nike_zoom_vapor.png"
                          style="max-height: 150px"
                        />
                      </td>

                      <td>
                        <a
                          href="./product_detail.html?id=1"
                          class="btn btn-sm btn-primary"
                          >Product Detail</a
                        >
                        <br /><button
                          type="button"
                          class="btn btn-sm btn-secondary"
                          data-toggle="modal"
                          data-target="#updateProductModal"
                          onclick='setModalFormData("1", "Sepatu Bola", "Nike", "Nike Zoom Vapor", "NSB1", "1000000" )'
                        >
                          Update Product
                        </button>
                        <br /><button
                          class="btn btn-sm btn-danger"
                          onclick="deleteConfirmation(1)"
                        >
                          Delete Product
                        </button>
                      </td>
                    </tr>
                    <tr>
                      <td>Nike</td>
                      <td>Nike Tiempo Legend</td>
                      <td>Sepatu Futsal</td>
                      <td>NSF1</td>
                      <td>Rp. 1.000.000</td>
                      <td>
                        <img
                          src="./img/products/futsal_nike_tiempo.jpg"
                          style="max-height: 150px"
                        />
                      </td>

                      <td>
                        <a
                          href="./product_detail.html?id=2"
                          class="btn btn-sm btn-primary"
                          >Product Detail</a
                        >
                        <br /><button
                          type="button"
                          class="btn btn-sm btn-secondary"
                          data-toggle="modal"
                          data-target="#updateProductModal"
                          onclick='setModalFormData("2", "Sepatu Futsal", "Nike", "Nike Tiempo Legend", "NSF1", "1000000" )'
                        >
                          Update Product
                        </button>
                        <br /><button
                          class="btn btn-sm btn-danger"
                          onclick="deleteConfirmation(2)"
                        >
                          Delete Product
                        </button>
                      </td>
                    </tr>
                    <tr>
                      <td>Nike</td>
                      <td>Nike Downshifter 13</td>
                      <td>Running</td>
                      <td>NR1</td>
                      <td>Rp. 800.000</td>
                      <td>
                        <img
                          src="./img/products/running_nike_downshifter_13.jpg"
                          style="max-height: 150px"
                        />
                      </td>

                      <td>
                        <a
                          href="./product_detail.html?id=3"
                          class="btn btn-sm btn-primary"
                          >Product Detail</a
                        >
                        <br /><button
                          type="button"
                          class="btn btn-sm btn-secondary"
                          data-toggle="modal"
                          data-target="#updateProductModal"
                          onclick='setModalFormData("3", "Running", "Nike", "Nike Downshifter 13", "NR1", "800000" )'
                        >
                          Update Product
                        </button>
                        <br /><button
                          class="btn btn-sm btn-danger"
                          onclick="deleteConfirmation(3)"
                        >
                          Delete Product
                        </button>
                      </td>
                    </tr>
                    <tr>
                      <td>Ortuseight</td>
                      <td>Ortuseight Hyperblast 2.0</td>
                      <td>Running</td>
                      <td>OR1</td>
                      <td>Rp. 650.000</td>
                      <td>
                        <img
                          src="./img/products/running_ortuseight_hyperblast_2_0.jpg"
                          style="max-height: 150px"
                        />
                      </td>

                      <td>
                        <a
                          href="./product_detail.html?id=4"
                          class="btn btn-sm btn-primary"
                          >Product Detail</a
                        >
                        <br /><button
                          type="button"
                          class="btn btn-sm btn-secondary"
                          data-toggle="modal"
                          data-target="#updateProductModal"
                          onclick='setModalFormData("4", "Running", "Ortuseight", "Ortuseight Hyperblast 2.0", "OR1", "650000" )'
                        >
                          Update Product
                        </button>
                        <br /><button
                          class="btn btn-sm btn-danger"
                          onclick="deleteConfirmation(4)"
                        >
                          Delete Product
                        </button>
                      </td>
                    </tr>
                    <tr>
                      <td>Adidas</td>
                      <td>Adidas Runfalcon</td>
                      <td>Running</td>
                      <td>AR1</td>
                      <td>Rp. 750.000</td>
                      <td>
                        <img
                          src="./img/products/running_adidas_runfalcon.jpg"
                          style="max-height: 150px"
                        />
                      </td>

                      <td>
                        <a
                          href="./product_detail.html?id=5"
                          class="btn btn-sm btn-primary"
                          >Product Detail</a
                        >
                        <br /><button
                          type="button"
                          class="btn btn-sm btn-secondary"
                          data-toggle="modal"
                          data-target="#updateProductModal"
                          onclick='setModalFormData("5", "Running", "Adidas", "Adidas Runfalcon", "AR1", "750000" )'
                        >
                          Update Product
                        </button>
                        <br /><button
                          class="btn btn-sm btn-danger"
                          onclick="deleteConfirmation(5)"
                        >
                          Delete Product
                        </button>
                      </td>
                    </tr>
                    <tr>
                      <td>Nike</td>
                      <td>Nike Court Vision</td>
                      <td>Sneakers</td>
                      <td>NS1</td>
                      <td>Rp. 700.000</td>
                      <td>
                        <img
                          src="./img/products/sneakers_nike_court_vision.jpg"
                          style="max-height: 150px"
                        />
                      </td>

                      <td>
                        <a
                          href="./product_detail.html?id=6"
                          class="btn btn-sm btn-primary"
                          >Product Detail</a
                        >
                        <br /><button
                          type="button"
                          class="btn btn-sm btn-secondary"
                          data-toggle="modal"
                          data-target="#updateProductModal"
                          onclick='setModalFormData("6", "Sneakers", "Nike", "Nike Court Vision", "NS1", "700000" )'
                        >
                          Update Product
                        </button>
                        <br /><button
                          class="btn btn-sm btn-danger"
                          onclick="deleteConfirmation(6)"
                        >
                          Delete Product
                        </button>
                      </td>
                    </tr>
                    <tr>
                      <td>Adidas</td>
                      <td>Adidas Galaxy</td>
                      <td>Sneakers</td>
                      <td>AS1</td>
                      <td>Rp. 300.000</td>
                      <td>
                        <img
                          src="./img/products/sneakers_adidas_galaxy.jpg"
                          style="max-height: 150px"
                        />
                      </td>

                      <td>
                        <a
                          href="./product_detail.html?id=7"
                          class="btn btn-sm btn-primary"
                          >Product Detail</a
                        >
                        <br /><button
                          type="button"
                          class="btn btn-sm btn-secondary"
                          data-toggle="modal"
                          data-target="#updateProductModal"
                          onclick='setModalFormData("7", "Sneakers", "Adidas", "Adidas Galaxy", "AS1", "300000" )'
                        >
                          Update Product
                        </button>
                        <br /><button
                          class="btn btn-sm btn-danger"
                          onclick="deleteConfirmation(7)"
                        >
                          Delete Product
                        </button>
                      </td>
                    </tr>
                    <tr>
                      <td>Ortuseight</td>
                      <td>Ortuseight Omega</td>
                      <td>Sneakers</td>
                      <td>OS1</td>
                      <td>Rp. 300.000</td>
                      <td>
                        <img
                          src="./img/products/sneakers_ortuseight_omega.jpg"
                          style="max-height: 150px"
                        />
                      </td>

                      <td>
                        <a
                          href="./product_detail.html?id=8"
                          class="btn btn-sm btn-primary"
                          >Product Detail</a
                        >
                        <br /><button
                          type="button"
                          class="btn btn-sm btn-secondary"
                          data-toggle="modal"
                          data-target="#updateProductModal"
                          onclick='setModalFormData("8", "Sneakers", "Ortuseight", "Ortuseight Omega", "OS1", "300000" )'
                        >
                          Update Product
                        </button>
                        <br /><button
                          class="btn btn-sm btn-danger"
                          onclick="deleteConfirmation(8)"
                        >
                          Delete Product
                        </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div clas="row" style="padding-top: 15px">
        <div class="col-md-12" style="padding: 0px">
          <div
            class="navbar navbar-expand-lg navbar-light bg-light text-center"
          >
            <div class="text-center mx-auto">© GoodShoes 2025</div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
<script>
  document.title = "Good Shoes Inc. Products";
  document.getElementById("linkProducts").classList.add("active");

  // --- regist
  document
    .getElementById("addProductForm")
    .addEventListener("submit", async function (event) {
      event.preventDefault(); // Prevent default form submission

      const formData = new FormData(this);

      try {
        //Register
        const responseRegist = await fetch("process/createProduct.html", {
          method: "POST",
          body: formData,
        });

        // Check if the response is OK (status 200–299)
        if (!responseRegist.ok) {
          throw new Error("Register error.");
        }

        const dataRegist = await responseRegist.json(); // Parse JSON response

        alert(dataRegist.message);
        if (dataRegist.result === true) {
          window.location.href = "./products.html";
        }
      } catch (error) {
        console.error("Error:", error);
        alert("There was an issue with the register form.");
      }
    });

  async function deleteProduct(id) {
    try {
      //Register
      const responseRegist = await fetch("process/deleteProduct.html?id=" + id);

      // Check if the response is OK (status 200–299)
      if (!responseRegist.ok) {
        throw new Error("Delete error.");
      }

      const dataRegist = await responseRegist.json(); // Parse JSON response

      alert(dataRegist.message);
      if (dataRegist.result === true) {
        window.location.href = "./products.html";
      }
    } catch (error) {
      console.error("Error:", error);
      alert("There was an issue when delete");
    }
  }

  //
  function deleteConfirmation(id) {
    // Show a confirmation dialog
    const userConfirmed = window.confirm("Do you want to delete this?");

    // Check the user's response
    if (userConfirmed) {
      deleteProduct(id);
    } else {
      alert("Delete cancelled.");
    }
  }

  //#addProductModal
  function setModalFormData(id, type, merk, nama, kode_produk, price) {
    // Set the form fields' values before showing the modal
    document.getElementById("id_update").value = id;
    document.getElementById("type_update").value = type;
    document.getElementById("merk_update").value = merk;
    document.getElementById("nama_update").value = nama;
    document.getElementById("kode_produk_update").value = kode_produk;
    document.getElementById("price_update").value = price;
  }

  $("#updateProductModal").on("show.bs.modal", function (event) {
    // You can do additional changes here if needed
    console.log("Modal is about to be shown!");
  });

  // Optional: Handle the form submission (just for demonstration)
  document
    .getElementById("updateProductModal")
    .addEventListener("submit", async function (event) {
      event.preventDefault();
      const form = document.getElementById("updateProductForm");
      const formData = new FormData(form);

      try {
        //Register
        const responseRegist = await fetch("process/updateProduct.html", {
          method: "POST",
          body: formData,
        });

        // Check if the response is OK (status 200–299)
        if (!responseRegist.ok) {
          throw new Error("Update error.");
        }

        const dataRegist = await responseRegist.json(); // Parse JSON response

        alert(dataRegist.message);
        if (dataRegist.result === true) {
          window.location.href = "./products.html";
        }
      } catch (error) {
        console.error("Error:", error);
        alert("There was an issue with the update form.");
      }
    });
</script>
